<!DOCTYPE html>
<html lang="en">
    
<head>
        <title>Tutorials</title>
<!-- Required meta tags -->
<meta charset="utf-8">
<!-- Responsive meta tag-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Tishya Khanna">



<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
<link rel = "stylesheet" href = "../css/stylesheet.css">

<!--Javascript-->
<script type="text/javascript" src = "../js/tutorials.js"></script>

</head>

    <body>
      <div class = "container-fluid bg-light">

       <!-- Nav bar start-->
       <nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
        <a class="navbar-brand" href="https://www.nscc.sg/">
            <img src="../assets/astar.png" width="100" height="50" class="d-inline-block align-top" alt="" loading="lazy">                
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#">
                <span class="sr-only">
                  Home
                </span></a>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Pages
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="../index.html">Home</a>
                <a class="dropdown-item" href="./tutorials.html">Tutorials</a>
                <a class="dropdown-item" href="./templates.html">Templates</a>
                <a class="dropdown-item" href="./diy.html">DIY</a>
              </div>
            </li>
            
          </ul>
        </div>
      </nav>
    <!-- Nav bar end-->
        
        <!--Information start-->
          <div class="jumbotron jumbotron-fluid p-2">
            <div class="container">
              <h1 class="display-8">Tutorials</h1>
              <div class="text-center">
                On this page, we shall guide you through the submission scripts we used in the ASPIRE 1 amd AI start up guides.
              </div>
            </div>
          </div>
        <!-- Information end-->
        
        
        
        <!--Buttons start-->
        <div class="row">

        <div id="ai_holder" class="col">
          <div class="text-center">
            <button id="aiButton" class="btn-success btn-lg btn-block" onclick="toggleAI()">AI</button>
          </div>
        </div>
        <div id="mpi_holder" class="col">
          <div class="text-center">
            <button id="mpiButton" class="btn-danger btn-lg btn-block" onclick="toggleMPI()">MPI</button>
          </div>
        </div>
        </div>

          <!--AI button end-->

          <!-- Tabs AI start-->
            <div  id="ai" class="panel panel-default">

              <ul class="nav nav-tabs mt-4">
                <li class="nav-item">
                    <a href="#cpu" class="nav-link active" data-toggle="tab">CPU</a>
                </li>
                <li class="nav-item">
                    <a href="#gpu" class="nav-link" data-toggle="tab">GPU</a>
                </li>
                <li class="nav-item">
                    <a href="#dgx" class="nav-link" data-toggle="tab">DGX</a>
                </li>
            </ul>

            <!--tabs AI end-->

            <!--CPU entire start-->
            <div class="tab-content">
                <div class="tab-pane fade show active" id="cpu">
                    <h2 class="mt-2 text-center font-weight-bold">CPU</h2>
                    
                    <p class="text-justify">
                      In the AI kick start guide, we provided an example for running a Deep Learning job 
                      on the compute nodes(CPU) of the NSCC ASPIRE 1 system. Below, we have provided the completed submission script.
                    </p>

                    <p>
                      Note that the <code>#PBS </code> directive is simply a way of telling the interpreter that the line is to be interpreted as a command for the 
                      PBS system (which the supercomputers in NSCC use to schedule jobs and allocate resources) instead of a comment. In the script generation algorithm, we will automatically add it
                      for you, so you do not have to worry about it. 
                    </p>

                    <br>

                    <!--Whole CPU script start-->
                <div class="form-group">
                  <div class="text-center">
                    <label class="font-weight-bold code-boxes-title" id="cpuAIScriptLabel" for="cpuAIScript">CPU Script for AI jobs</label>

                  </div>
                 <textarea class="form-control my-code" id="cpuAIScript" rows="12">
#!/bin/bash
# Exercise 1 submission script - submit.sh
# Below, is the queue
#PBS -q normal
#PBS -j oe
#PBS -l select=1:ncpus=24:mem=1G
#PBS -l walltime=00:10:00
#PBS -P Personal
#PBS -N linear_program

# Commands start here
cd ${PBS_O_WORKDIR}
module load singularity
singularity exec /app/singularity/images/nscc/shchung/inc5654.img python linear.py</textarea>
                </div>

                <p class="text-justify">
                  In this section, we shall be going through each line of the script and relating it back to how you can use this website to generate a similar script easily.
                </p>
                <!--Whole CPU script end-->
                
                <br>

                <!--Bash directive start-->

                <div class="form-group">
                  <div class="text-center">
                    <label class="font-weight-bold code-boxes-title" for="cpuAIBash">Bash directive</label>
                  </div>
                 <textarea class="form-control my-code" id="cpuAIBash" rows="2">
#!/bin/bash
# Exercise 1 submission script - submit.sh</textarea>
                </div>
                <p class="text-justify">
                  The first line, <code>#!/bin/bash</code> is a directive telling the environment to use bash as a command interpreter. 
                  We will automatically include in the scripts generated on this website, so you do not have to worry about it. The second line,
                  <code># Exercise 1 submission script - submit.sh</code> is simply a comment, and can be added by you once the script is generated.
                </p>

                <!--Bash directive end-->

                <br>


                <!--Queue directive start-->

                <div class="form-group">
                  <div class="text-center">
                    <label class="font-weight-bold code-boxes-title" for="cpuAIQueue">Queue directive</label>
                  </div>
                 <textarea class="form-control my-code" id="cpuAIQueue" rows="2">
# Below, is the queue
#PBS -q normal</textarea>
                </div>
                <p class="text-justify">
                  The first line, <code># Below, is the queue</code> is a just a comment again and can be added by you. In the second line,<code>#PBS -q normal</code> 
                  we have the queue directive <code>-q</code>. <code>normal</code> refers to the actual queue, the CPU (compute nodes). When using the website, you can specify
                  the queue using the dropdown box below.
                </p>

                <label for="queue">Which Queue do you want to submit your job to?</label>
                <select id = "queue" class = "form-control" name = "queue">
                <option disabled value = "NIL">--Please select an option--</option>
                <option selected value = "normal">CPU</option>
                <option value = "gpu">GPU</option>
                <option value = "largemem">Large Memory</option>
                <option value = "dgx">DGX</option>
            </select>

            <p class="text-justify">
              To find out more about the jobs, you can refer to the <a href="../index.html">main page</a> or the <a href="https://help.nscc.sg/pbspro-quickstartguide/#_Toc458432782">NSCC User guides</a>.
            </p>

                <!--Queue directive end-->

                <br>


                <!--Output directive start-->

                <div class="form-group">
                  <div class="text-center">
                    <label class="font-weight-bold code-boxes-title" for="cpuAIQueue">Output and Error directive</label>
                  </div>
                 <textarea class="form-control my-code" id="cpuAIQueue" rows="1">
#PBS -j oe</textarea>
                </div>
                <p class="text-justify">
                  In this line,<code>#PBS -j oe</code> 
                  we have the output and error directive <code>-j</code>. <code>oe</code> allows you to join the output and error files together. If you
                  would like to keep them separate, you can exclude this. When using the website, you can specify this using the checkbox below.
                </p>

                <div class="col-4" id="output_choice">Do you want to join the output with the error messages?
          
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="output" id="yesOutput" value="yes" checked>
                    <label class="form-check-label" for="yesOutput">
                      Yes
                    </label>
                  </div>
    
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="output" id="noOutput" value="no">
                    <label class="form-check-label" for="yesOutput">
                      No
                    </label>
                  </div>
                </div>

                <!--Output directive end-->
                
                <br>


                <!--Cores and memory directive start-->

                <div class="form-group">
                  <div class="text-center">
                    <label class="font-weight-bold code-boxes-title" for="cpuAICores">Cores and Memory directive</label>
                  </div>
                 <textarea class="form-control my-code" id="cpuAICores" rows="1">
#PBS -l select=1:ncpus=24:mem=1G</textarea>
                </div>
                <p class="text-justify">
                  In this line,<code>#PBS -l select=1:ncpus=24:mem=1G</code> 
                  we have the directive (called limit) for the number of cores and memory <code>-l</code>. Note that the same directive is used for walltime as well. 
                 This allows you to control the number of units of CPUs and also the number of CPUs. 
                 In this case, we have selected 1 unit <code>select=1:</code> of 24 CPUs <code>ncpus=24:</code>.
                 Finally, we can also specify the amount of memory (in GB) that we need for our task. Here, we have 1GB of memory <code>mem=1G</code> 
                When using the website, you can specify the number of units of CPUs, number of CPUs per unit and the memory needed with the number fields below.
              </p>

                <div class="col">
                  <label for="nodes">How many units of processors do you need?</label>
                  <input type="number" class = "form-control" id="nodes" name="nodes">
                </div>
  
                <div class="col">
                  <label for="memory">How much memory (in GB) do you need?</label>
                  <input type="number" class = "form-control" id="memory" name="memory" placeholder="0GB">
                </div>

                <!--Cores and memory directive end-->


                <br>


                <!--Walltime start-->

                <div class="form-group">
                  <div class="text-center">
                    <label class="font-weight-bold code-boxes-title" for="cpuAITime">Walltime directive</label>
                  </div>
                 <textarea class="form-control my-code" id="cpuAICores" rows="1">#PBS -l walltime=00:10:00</textarea>
                </div>
                <p class="text-justify">
                  In this line,<code>#PBS -l walltime=00:10:00</code> 
                  we have the directive (called limit) for the total time that we would like to allocate for this task <code>-l</code>. Note that the same directive is used for the number of cores and memory as well. 
                 By setting a smaller required time, your task can be fast tracked to queues which are meant for short tasks. 
                 In this case, we have selected 0 hours, 10 minutes and 0 seconds unit <code>walltime=00:10:00</code>.
                When using the website, you can specify the hours, minutes and seconds with the mumber fields below.
              </p>

              <div class="row mt-4">
                <div class="col">
                  <label for="hours">How many hours?</label>
                  <input type="number" class = "form-control" id="hours" name="hours" placeholder="0"> 
                </div>
                <div class="col">
                  <label for="minutes">How many minutes?</label>
                  <input type="number" class="form-control" id="minutes" name="minutes" placeholder="0">
                </div>
                <div class="col">
                  <label for="seconds">How many seconds?</label>
                  <input type="number"  class="form-control" id="seconds" name="seconds" placeholder="0">
                </div>
              </div>

                <!--Walltime end-->


                <br>


                <!--Project start-->

                <div class="form-group">
                  <div class="text-center">
                    <label class="font-weight-bold code-boxes-title" for="cpuAITime">Project directive</label>
                  </div>
                 <textarea class="form-control my-code" id="cpuAICores" rows="1">#PBS -P Personal</textarea>
                </div>
                <p class="text-justify">
                  In this line,<code>#PBS -P Personal</code> 
                  we have the directive (called project) for the project which we would like to submit our job under <code>-P</code>. If you have a special project ID (assigned by NSCC), then you
                  can enter it in the text box below after selecting Yes. Else, we will autofill Personal, and the resources will be charged to your personal account.
              </p>

              <div class="col" id="projectID">Do you have a special Project ID for your job?
            
                <div class="form-check">
                <input class="form-check-input" type="radio" name="project" id="yesProject" value="yes">
                <label class="form-check-label" for="yesProject">
                  Yes
                </label>
              </div>
              
              <div class="form-check">
                <input class="form-check-input" type="radio" name="project" id="noProject" checked value="no">
                <label class="form-check-label" for="noProject">
                  No
                </label>
              </div>
              <div class="form-check" id="pid" >
              <input class="form-check-input" type="text" name="projectID" id ="projectID" placeholder="project id">
            </div>
            </div>

                <!--Project end-->


                <br>


                <!--Name start-->
                <div class="form-group">
                  <div class="text-center">
                    <label class="font-weight-bold code-boxes-title" for="cpuAITime">Name directive</label>
                  </div>
                 <textarea class="form-control my-code" id="cpuAICores" rows="1">#PBS -N linear_program</textarea>
                </div>
                <p class="text-justify">
                  In this line,<code>#PBS -N linear_program</code> 
                  we have the directive (called name) for the name of our job <code>-N</code>. This name is up to you to choose. Note that your output and error files will be named after this as well.
                  In this website, you can fill in your desired name with the help of the text box below.
              </p>

              <div class="col" id="outName">Do you have a special name for your output?
            
                <div class="form-check">
                <input class="form-check-input" type="radio" name="outputName" id="yesOutputName" value="yes">
                <label class="form-check-label" for="yesOutputName">
                  Yes
                </label>
              </div>
              
              <div class="form-check">
                <input class="form-check-input" type="radio" name="outputName" id="noOutputName" checked value="no">
                <label class="form-check-label" for="noOutputName">
                  No
                </label>
              </div>
              <div class="form-check" id="oNI">
              <input class="form-check-input" type="text" name="outputNameInput" id ="outputNameInput" placeholder="output name">
            </div>
            </div>
            <br>
            <br>
            <br>
          </div>

                <!--Name end-->





              <!--CPU entire end-->








































              <!--GPU entire start-->

                  <div class="tab-pane fade" id="gpu">
                  <h2 class="mt-2 text-center font-weight-bold">GPU</h2>
                  
                  <p class="text-justify">
                    In the AI kick start guide, we provided an example for running a Deep Learning job 
                    on the Graphics Processing Unit (GPU) of the NSCC ASPIRE 1 system. Below, we have provided the completed submission script.
                  </p>

                  <p>
                    Note that the <code>#PBS </code> directive is simply a way of telling the interpreter that the line is to be interpreted as a command for the 
                    PBS system (which the supercomputers in NSCC use to schedule jobs and allocate resources) instead of a comment. In the script generation algorithm, we will automatically add it
                    for you, so you do not have to worry about it. 
                  </p>

                  <br>

                  <!--Whole GPU script start-->
              <div class="form-group">
                <div class="text-center">
                  <label class="font-weight-bold code-boxes-title" id="gpuAIScriptLabel" for="gpuAIScript">GPU Script for AI jobs</label>
                </div>
               <textarea class="form-control my-code" id="gpuAIScript" rows="14">
#!/bin/bash
# Exercise 2 submission script – submit.sh
# Below, is the queue
#PBS -q gpu
#PBS -j oe
#PBS -l select=1:ncpus=24:mem=1G
#PBS -l walltime=00:10:00
#PBS -P Personal
#PBS -N fashion_program

# Commands start here
module load tensorflow/1.4
cd ${PBS_O_WORKDIR}
python fashion.py</textarea>
              </div>

              <p class="text-justify">
                In this section, we shall be going through each line of the script and relating it back to how you can use this website to generate a similar script easily.
              </p>
              <!--Whole GPU script end-->
              
              <br>
            
              <!--Bash directive start-->
            
              <div class="form-group">
                <div class="text-center">
                  <label class="font-weight-bold code-boxes-title" for="gpuAIBash">Bash directive</label>
                </div>
               <textarea class="form-control my-code" id="gpuAIBash" rows="2">#!/bin/bash
# Exercise 2 submission script – submit.sh</textarea>
              </div>
              <p class="text-justify">
                The first line, <code>#!/bin/bash</code> is a directive telling the environment to use bash as a command interpreter. 
                We will automatically include in the scripts generated on this website, so you do not have to worry about it. The second line,
                <code># Exercise 2 submission script - submit.sh</code> is simply a comment, and can be added by you once the script is generated.
              </p>
            
              <!--Bash directive end-->
            
              <br>
            
            
              <!--Queue directive start-->
            
              <div class="form-group">
                <div class="text-center">
                  <label class="font-weight-bold code-boxes-title" for="gpuAIQueue">Queue directive</label>
                </div>
               <textarea class="form-control my-code" id="gpuAIQueue" rows="2">
# Below, is the queue
#PBS -q gpu</textarea>
              </div>
              <p class="text-justify">
                The first line, <code># Below, is the queue</code> is a just a comment again and can be added by you. In the second line,<code>#PBS -q gpu</code> 
                we have the queue directive <code>-q</code>. <code>gpu</code> refers to the actual queue, the GPU (Graphics Processing Unit). When using the website, you can specify
                the queue using the dropdown box below.
              </p>
            
              <label for="queue">Which Queue do you want to submit your job to?</label>
              <select id = "queue" class = "form-control" name = "queue">
              <option disabled value = "NIL">--Please select an option--</option>
              <option value = "normal">CPU</option>
              <option selected value = "gpu">GPU</option>
              <option value = "largemem">Large Memory</option>
              <option value = "dgx">DGX</option>
          </select>
            
            <p class="text-justify">
            To find out more about the jobs, you can refer to the <a href="../index.html">main page</a> or the <a href="https://help.nscc.sg/pbspro-quickstartguide/#_Toc458432782">NSCC User guides</a>.
            </p>
            
              <!--Queue directive end-->
            
              <br>
            
            
              <!--Output directive start-->
            
              <div class="form-group">
                <div class="text-center">
                  <label class="font-weight-bold code-boxes-title" for="gpuAIQueue">Output and Error directive</label>
                </div>
               <textarea class="form-control my-code" id="gpuAIQueue" rows="1">
#PBS -j oe</textarea>
              </div>
              <p class="text-justify">
                In this line,<code>#PBS -j oe</code> 
                we have the output and error directive <code>-j</code>. <code>oe</code> allows you to join the output and error files together. If you
                would like to keep them separate, you can exclude this. When using the website, you can specify this using the checkbox below.
              </p>
            
              <div class="col-4" id="output_choice">Do you want to join the output with the error messages?
            
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="output" id="yesOutput" value="yes" checked>
                  <label class="form-check-label" for="yesOutput">
                    Yes
                  </label>
                </div>
            
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="output" id="noOutput" value="no">
                  <label class="form-check-label" for="yesOutput">
                    No
                  </label>
                </div>
              </div>
            
              <!--Output directive end-->
              
              <br>
            
            
              <!--Cores and memory directive start-->
            
              <div class="form-group">
                <div class="text-center">
                  <label class="font-weight-bold code-boxes-title" for="gpuAICores">Cores and Memory directive</label>
                </div>
               <textarea class="form-control my-code" id="gpuAICores" rows="1">
#PBS -l select=1:ncpus=24:mem=1G</textarea>
              </div>
              <p class="text-justify">
                In this line,<code>#PBS -l select=1:ncpus=24:mem=1G</code> 
                we have the directive (called limit) for the number of cores and memory <code>-l</code>. Note that the same directive is used for walltime as well. 
               This allows you to control the number of units of GPUs and also the number of GPUs per unit. When using ASPIRE 1 and the GPU queue, we can simply use the label cpu instead of gpu.
               In this case, we have selected 1 unit <code>select=1:</code> of 24 CPUs <code>ncpus=24:</code>.
               Finally, we can also specify the amount of memory (in GB) that we need for our task. Here, we have 1GB of memory <code>mem=1G</code> 
              When using the website, you can specify the number of units of GPUs and the memory needed with the number fields below.
            </p>
            
              <div class="col">
                <label for="nodes">How many units of processors do you need?</label>
                <input type="number" class = "form-control" id="nodes" name="nodes">
              </div>
            
              <div class="col">
                <label for="memory">How much memory (in GB) do you need?</label>
                <input type="number" class = "form-control" id="memory" name="memory" placeholder="0GB">
              </div>
            
              <!--Cores and memory directive end-->
            
            
              <br>
            
            
              <!--Walltime start-->
            
              <div class="form-group">
                <div class="text-center">
                  <label class="font-weight-bold code-boxes-title" for="gpuAITime">Walltime directive</label>
                </div>
               <textarea class="form-control my-code" id="gpuAITime" rows="1">#PBS -l walltime=00:10:00</textarea>
              </div>
              <p class="text-justify">
                In this line,<code>#PBS -l walltime=00:10:00</code> 
                we have the directive (called limit) for the total time that we would like to allocate for this task <code>-l</code>. Note that the same directive is used for the number of cores and memory as well. 
               By setting a smaller required time, your task can be fast tracked to queues which are meant for short tasks. 
               In this case, we have selected 0 hours, 10 minutes and 0 seconds unit <code>walltime=00:10:00</code>.
              When using the website, you can specify the hours, minutes and seconds with the number fields below.
            </p>
            
            <div class="row mt-4">
              <div class="col">
                <label for="hours">How many hours?</label>
                <input type="number" class = "form-control" id="hours" name="hours" placeholder="0"> 
              </div>
              <div class="col">
                <label for="minutes">How many minutes?</label>
                <input type="number" class="form-control" id="minutes" name="minutes" placeholder="0">
              </div>
              <div class="col">
                <label for="seconds">How many seconds?</label>
                <input type="number"  class="form-control" id="seconds" name="seconds" placeholder="0">
              </div>
            </div>
            
              <!--Walltime end-->
            
            
              <br>
            
            
              <!--Project start-->
            
              <div class="form-group">
                <div class="text-center">
                  <label class="font-weight-bold code-boxes-title" for="gpuAITime">Project directive</label>
                </div>
               <textarea class="form-control my-code" id="gpuAICores" rows="1">#PBS -P Personal</textarea>
              </div>
              <p class="text-justify">
                In this line,<code>#PBS -P Personal</code> 
                we have the directive (called project) for the project which we would like to submit our job under <code>-P</code>. If you have a special project ID (assigned by NSCC), then you
                can enter it in the text box below after selecting Yes. Else, we will autofill Personal, and the resources will be charged to your personal account.
            </p>
            
            <div class="col" id="projectID">Do you have a special Project ID for your job?
            
              <div class="form-check">
              <input class="form-check-input" type="radio" name="project" id="yesProject" value="yes">
              <label class="form-check-label" for="yesProject">
                Yes
              </label>
            </div>
            
            <div class="form-check">
              <input class="form-check-input" type="radio" name="project" id="noProject" checked value="no">
              <label class="form-check-label" for="noProject">
                No
              </label>
            </div>
            <div class="form-check" id="pid" >
            <input class="form-check-input" type="text" name="projectID" id ="projectID" placeholder="project id">
            </div>
            </div>
            
              <!--Project end-->
            
            
              <br>
            
            
              <!--Name start-->
              <div class="form-group">
                <div class="text-center">
                  <label class="font-weight-bold code-boxes-title" for="gpuAITime">Name directive</label>
                </div>
               <textarea class="form-control my-code" id="gpuAICores" rows="1">#PBS -N fashion_program</textarea>
              </div>
              <p class="text-justify">
                In this line,<code>#PBS -N fashion_program</code> 
                we have the directive (called name) for the name of our job <code>-N</code>. This name is up to you to choose. Note that your output and error files will be named after this as well.
                In this website, you can fill in your desired name with the help of the text box below.
            </p>
            
            <div class="col" id="outName">Do you have a special name for your output?
            
              <div class="form-check">
              <input class="form-check-input" type="radio" name="outputName" id="yesOutputName" value="yes">
              <label class="form-check-label" for="yesOutputName">
                Yes
              </label>
            </div>
            
            <div class="form-check">
              <input class="form-check-input" type="radio" name="outputName" id="noOutputName" checked value="no">
              <label class="form-check-label" for="noOutputName">
                No
              </label>
            </div>
            <div class="form-check" id="oNI">
            <input class="form-check-input" type="text" name="outputNameInput" id ="outputNameInput" placeholder="output name">
            </div>
            </div>
              <!--Name end-->
            
            
                  <br>
                  <br>
                  <br>
            
            
                </div>
            
                <!--GPU entire end-->

































<!--DGX entire start-->

<div class="tab-pane fade" id="dgx">
  <h2 class="mt-2 text-center font-weight-bold">DGX</h2>
  
  <p class="text-justify">
    In the AI kick start guide, we provided an example for running a Deep Learning job 
    on the DGX machine of the NSCC. Below, we have provided the completed submission script.
  </p>

  <p>
    Note that the <code>#PBS </code> directive is simply a way of telling the interpreter that the line is to be interpreted as a command for the 
    PBS system (which the supercomputers in NSCC use to schedule jobs and allocate resources) instead of a comment. In the script generation algorithm, we will automatically add it
    for you, so you do not have to worry about it. 
  </p>

  <br>
  <br>


  <!--Whole DGX script start-->
<div class="form-group">
<div class="text-center">
  <label class="font-weight-bold code-boxes-title" id="dgxAIScriptLabel" for="dgxAIScript">DGX Script for AI jobs</label>
</div>
<textarea class="form-control my-code" id="dgxAIScript" rows="16">
#!/bin/sh
# Exercise 3 submission script – submit.sh
# Below, is the queue
#PBS -q dgx
#PBS -j oe
# Number of cores
#PBS -l select=1:ncpus=40:ngpus=8:mem=1G
#PBS -l walltime=00:25:00
#PBS -P <YOUR_ID>
#PBS -N convolution_program

# Start of commands 
image="nvcr.io/nvidia/tensorflow"
nscc-docker run $image << EOF
cd $PBS_O_WORKDIR
python convolution.py
EOF
  </textarea>
</div>

<p class="text-justify">
In this section, we shall be going through each line of the script and relating it back to how you can use this website to generate a similar script easily.
</p>
<!--Whole dgx script end-->

<br>

<!--Bash directive start-->

<div class="form-group">
<div class="text-center">
  <label class="font-weight-bold code-boxes-title" for="dgxAIBash">Bash directive</label>
</div>
<textarea class="form-control my-code" id="dgxAIBash" rows="2">#!/bin/bash
# Exercise 2 submission script – submit.sh</textarea>
</div>
<p class="text-justify">
The first line, <code>#!/bin/bash</code> is a directive telling the environment to use bash as a command interpreter. 
We will automatically include in the scripts generated on this website, so you do not have to worry about it. The second line,
<code># Exercise 3 submission script - submit.sh</code> is simply a comment, and can be added by you once the script is generated.
</p>

<!--Bash directive end-->

<br>


<!--Queue directive start-->

<div class="form-group">
<div class="text-center">
  <label class="font-weight-bold code-boxes-title" for="dgxAIQueue">Queue directive</label>
</div>
<textarea class="form-control my-code" id="dgxAIQueue" rows="2">
# Below, is the queue
#PBS -q dgx</textarea>
</div>
<p class="text-justify">
The first line, <code># Below, is the queue</code> is a just a comment and can be added by you. In the second line,<code>#PBS -q dgx</code> 
we have the queue directive <code>-q</code>. <code>dgx</code> refers to the actual queue, the NVIDIA DGX, which is a NSCC supercomputer specialised for AI jobs.
 When using the website, you can specify the queue using the dropdown box below.
</p>

<label for="queue">Which Queue do you want to submit your job to?</label>
<select id = "queue" class = "form-control" name = "queue">
<option disabled value = "NIL">--Please select an option--</option>
<option selected value = "normal">CPU</option>
<option value = "gpu">GPU</option>
<option value = "largemem">Large Memory</option>
<option selected value = "dgx">DGX</option>
</select>

<p class="text-justify">
To find out more about the jobs, you can refer to the <a href="../index.html">main page</a> or the <a href="https://help.nscc.sg/pbspro-quickstartguide/#_Toc458432782">NSCC User guides</a>.
</p>

<!--Queue directive end-->

<br>


<!--Output directive start-->

<div class="form-group">
<div class="text-center">
  <label class="font-weight-bold code-boxes-title" for="dgxAIQueue">Output and Error directive</label>
</div>
<textarea class="form-control my-code" id="dgxAIQueue" rows="1">
#PBS -j oe</textarea>
</div>
<p class="text-justify">
In this line,<code>#PBS -j oe</code> 
we have the output and error directive <code>-j</code>. <code>oe</code> allows you to join the output and error files together. If you
would like to keep them separate, you can exclude this. When using the website, you can specify this using the checkbox below.
</p>

<div class="col-4" id="output_choice">Do you want to join the output with the error messages?

<div class="form-check">
  <input class="form-check-input" type="radio" name="output" id="yesOutput" value="yes" checked>
  <label class="form-check-label" for="yesOutput">
    Yes
  </label>
</div>

<div class="form-check">
  <input class="form-check-input" type="radio" name="output" id="noOutput" value="no">
  <label class="form-check-label" for="yesOutput">
    No
  </label>
</div>
</div>

<!--Output directive end-->

<br>


<!--Cores and memory directive start-->

<div class="form-group">
<div class="text-center">
  <label class="font-weight-bold code-boxes-title" for="dgxAICores">Cores and Memory directive</label>
</div>
<textarea class="form-control my-code" id="dgxAICores" rows="2">
# Number of cores
#PBS -l select=1:ncpus=40:ngpus=8:mem=1G</textarea>
</div>
<p class="text-justify">
Again, the first line is simply a comment. We have an additional comment here as the DGX has a special requirement for the number of cores. In this line,<code>#PBS -l select=1:ncpus=40:ngpus=8:mem=1G</code> 
we have the directive (called limit) for the number of cores and memory <code>-l</code>. Note that the same directive is used for walltime as well. 
This allows you to control the number of units of dgxs and also the number of dgxs per unit. When using ASPIRE 1 and the dgx queue, we can simply use the label cpu instead of dgx.
In this case, we have selected 1 unit <code>select=1:</code> of 40 CPUs <code>ncpus=40:</code> and 8 GPUs <code>ngpus=8</code>. In the DGX system, we have to specify five times the number of CPUs as GPUs,
with a cap on the number of GPUs at 8 (Machine constraints).
Finally, we can also specify the amount of memory (in GB) that we need for our task. Here, we have 1GB of memory <code>mem=1G</code> 
When using the website, you can specify the number of processors and the memory needed with the number fields below.
</p>

<div class="col">
<label for="nodes">How many units of processors do you need?</label>
<input type="number" class = "form-control" id="nodes" name="nodes">
</div>

<div class="col">
<label for="memory">How much memory (in GB) do you need?</label>
<input type="number" class = "form-control" id="memory" name="memory" placeholder="0GB">
</div>

<!--Cores and memory directive end-->


<br>


<!--Walltime start-->

<div class="form-group">
<div class="text-center">
  <label class="font-weight-bold code-boxes-title" for="dgxAITime">Walltime directive</label>
</div>
<textarea class="form-control my-code" id="dgxAITime" rows="1">#PBS -l walltime=00:25:00</textarea>
</div>
<p class="text-justify">
In this line,<code>#PBS -l walltime=00:25:00</code> 
we have the directive (called limit) for the total time that we would like to allocate for this task <code>-l</code>. Note that the same directive is used for the number of cores and memory as well. 
By setting a smaller required time, your task can be fast tracked to queues which are meant for short tasks. 
In this case, we have selected 0 hours, 25 minutes and 0 seconds unit <code>walltime=00:25:00</code>.
When using the website, you can specify the hours, minutes and seconds with the number fields below.
</p>

<div class="row mt-4">
<div class="col">
<label for="hours">How many hours?</label>
<input type="number" class = "form-control" id="hours" name="hours" placeholder="0"> 
</div>
<div class="col">
<label for="minutes">How many minutes?</label>
<input type="number" class="form-control" id="minutes" name="minutes" placeholder="0">
</div>
<div class="col">
<label for="seconds">How many seconds?</label>
<input type="number"  class="form-control" id="seconds" name="seconds" placeholder="0">
</div>
</div>

<!--Walltime end-->


<br>


<!--Project start-->

<div class="form-group">
<div class="text-center">
  <label class="font-weight-bold code-boxes-title" for="dgxAITime">Project directive</label>
</div>
<textarea class="form-control my-code" id="dgxAICores" rows="1">#PBS -P <YOUR_ID></textarea>
</div>
<p class="text-justify">
In this line,<code>  #PBS -P <YOUR_ID></code> 
we have the directive (called project) for the project which we would like to submit our job under <code>-P</code>. In order to submit jobs to the DGX queue, you will require a special project ID 
from NSCC. If you try using <code>Personal</code>, your job will be rejected. You can email the NSCC helpdesk to get your ID.
</p>

<div class="col" id="projectID">Do you have a special Project ID for your job?

<div class="form-check">
<input class="form-check-input" type="radio" name="project" id="yesProject" value="yes">
<label class="form-check-label" for="yesProject">
Yes
</label>
</div>

<div class="form-check">
<input class="form-check-input" type="radio" name="project" id="noProject" checked value="no">
<label class="form-check-label" for="noProject">
No
</label>
</div>
<div class="form-check" id="pid" >
<input class="form-check-input" type="text" name="projectID" id ="projectID" placeholder="project id">
</div>
</div>

<!--Project end-->


<br>


<!--Name start-->
<div class="form-group">
<div class="text-center">
  <label class="font-weight-bold code-boxes-title" for="dgxAITime">Name directive</label>
</div>
<textarea class="form-control my-code" id="dgxAICores" rows="1">#PBS -N convolution_program</textarea>
</div>
<p class="text-justify">
In this line,<code>#PBS -N convolution_program</code> 
we have the directive (called name) for the name of our job <code>-N</code>. This name is up to you to choose. Note that your output and error files will be named after this as well.
In this website, you can fill in your desired name with the help of the text box below.
</p>

<div class="col" id="outName">Do you have a special name for your output?

<div class="form-check">
<input class="form-check-input" type="radio" name="outputName" id="yesOutputName" value="yes">
<label class="form-check-label" for="yesOutputName">
Yes
</label>
</div>

<div class="form-check">
<input class="form-check-input" type="radio" name="outputName" id="noOutputName" checked value="no">
<label class="form-check-label" for="noOutputName">
No
</label>
</div>
<div class="form-check" id="oNI">
<input class="form-check-input" type="text" name="outputNameInput" id ="outputNameInput" placeholder="output name">
</div>
</div>
<!--Name end-->


  <br>
  <br>
  <br>


</div>

<!--DGX entire end-->



            </div>  
            </div>

<!--Ai end-->

            




























            <!--MPI Start-->

            <div style="display:none" id="mpi" class="panel panel-default">
              <h1 class="mt-4">Coming soon!</h1>


            </div>
            <!--MPI End-->







        <!--Buttons to choose AI or MPI end-->


        


      <!--Container close-->
      </div>

        
         <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
         <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
         <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    
        </div>
        </body>
</html>